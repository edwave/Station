<!-- EJo 2022-06-10 Verzamelen en Delen in 1 HTML de teksten zijn conform 1.6.0 -->
<!doctype html>
<script type="text/javascript" src="js/dvza.js?version=170"></script>
<html lang="nl">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <meta name="revised" content="Thursday, Oct 15th, 2020">
  <title>MedMij-toestemmingsverklaring</title>
  <link rel="stylesheet" href="css/style.css">
  <!-- <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet"> -->
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
  <link rel="icon" href="img/favicon.ico" type="image/x-icon">
</head>

<body>
  <script type="text/javascript" nonce="jr">
    function getParameterByName(name) {
      const queryString = window.location.search;
	  //alert(queryString);
	  //alert(name);
      const urlParams = new URLSearchParams(queryString);
      return urlParams.get(name);
    }

    function approved() {
      document.getElementById('consent').value = "approved";
      document.getElementById("profile").submit();
    }

    function deny() {
      document.getElementById('consent').value = "denied";
      document.getElementById("profile").submit();
    }

    document.addEventListener("DOMContentLoaded", function () {
      document.getElementById("sessionDataKey").setAttribute("value", getParameterByName("sessionDataKey"));
      showParams();
    });
  </script>

  <div id="app">
    <header class="header">
      <!--a href="https://www.medmij.nl/medmij-label/" target="_blank"><img class="logoZA" src="img/LogoZA.png" alt="Uw Zorgaanbied" id="idLOGO"></a-->
      <a href="https://www.medmij.nl/medmij-label/" target="_blank"><img class="logo" src="img/medmij-label.png" alt="MedMij, veilig online uitwisselen van gezondheidsgegevens"></a>
    </header>

    <div class="container" id="Verzamelen">
      <p class="info">
        Ik wil persoons- en medische gegevens opslaan in mijn persoonlijke gezondheidsomgeving (PGO).
      </p>
      <p class="info">
        Persoonsgegevens zijn bijvoorbeeld je naam en geboortedatum. Medische gegevens zijn de gegevens die een zorgverlener bijhoudt over jouw behandeling in jouw medisch dossier.
        Bijvoorbeeld de medicijnen die je slikt en bloeduitslagen.
      </p>
      <p class="info">
        Hierbij geef ik <span class="text-secondary" id="idZA">NaamZorgaanbieder</span> toestemming om de gegevens die ik opvraag aan <span class="text-secondary" id="idPGO">NaamLeverancierPGO</span>, de aanbieder van mijn PGO, te sturen.
      </p>
      <p class="info">
        De volgende gegevens wil ik opvragen en in mijn PGO opslaan:
      <ul class="info" id="myVerzamelenList"></ul>
      <script nonce="at">
        const urlParamsV = new URLSearchParams(window.location.search);
        var alldata = urlParamsV.get('gid');
        var data = alldata.split(',')
        list = document.getElementById("myVerzamelenList");
        data.forEach((item) => {
          li = document.createElement("li");
          li.innerHTML = `<span class="text-secondary">${item}</span>`;
          list.appendChild(li);
        });
      </script>
      </p>
      <form action="https://acc-auth.dutchhealthcare.nl/commonauth" method="post" id="profile" name="">
        <input type="hidden" id="sessionDataKey" name="sessionDataKey" />
        <input type="hidden" name="consent" id="consent" value="denied" />
      </form>
      <div class="buttons">
          <button id="buttonYes" class="permission-btn yes">Ja, ik geef toestemming</button>
         <button id="buttonNo" class="deny-btn no">Nee, ik geef geen toestemming</button>
       </div>
      <p class="info">
        Wanneer je een keuze hebt gemaakt of deze pagina sluit, dan word je uitgelogd bij <span class="text-secondary" id="idZA">NaamZorgaanbieder</span>.
      </p>
      <section class="trigger">
        <input type="checkbox" name="showstatement" id="showstatement" />
        <label for="showstatement"> Toon toelichting</label>
        <div class="statement">
          <p>
            In een persoonlijke gezondheidsomgeving (PGO) kun je verbinding maken met de computer van jouw zorgaanbieder(s). Zoals van de huisarts of het ziekenhuis.
          </p>
          <p>
            Natuurlijk wil je dat dit veilig gebeurt. Hiervoor heeft Stichting MedMij strenge regels gemaakt. PGO’s en zorgaanbieders met een MedMij-label volgen deze regels.
            Het MedMij-label betekent dat jij deze PGO op een veilige manier kunt verbinden met deze zorgaanbieders.
            En het betekent ook dat jouw gegevens veilig worden opgeslagen in jouw PGO.
          </p>
          <p>
            Door de Wet op de geneeskundige behandelingsovereenkomst is de zorgverlener, zoals je huisarts, verplicht om ervoor te zorgen dat ‘anderen’ (lees: jouw PGO) dan de patiënt (lees: jij) geen inlichtingen hebben over,
            inzage hebben in of een afschrift hebben van jouw medisch dossier, tenzij je hiervoor toestemming hebt gegeven.
          </p>
          <p>
            Wil je bij jouw zorgverlener gegevens opvragen om in jouw PGO te zetten? Dan moet je de zorgverlener hier toestemming voor geven. 
            Je geeft dan toestemming voor de specifieke gegevens die hij of zij mag uitwisselen. Niet voor andere gegevens.
          </p>
        </div>
      </section>
    </div>

    <div class="container" id="Delen">
      <p class="info">
        Ik wil persoons- en medische gegevens delen met <span class="text-secondary" id="idZA">NaamZorgaanbieder</span>.
        Jouw zorgverlener bepaalt daarna of hij deze informatie opneemt in jouw medisch dossier en/of gebruikt voor jouw
        behandeling.
      </p>
      <p class="info">
        Persoonsgegevens zijn bijvoorbeeld je naam en geboortedatum.
        Medische gegevens zijn de gegevens die een zorgverlener bijhoudt over jouw behandeling.
        Bijvoorbeeld de medicijnen die je slikt en bloeduitslagen.
      </p>
      <p class="info">
        Hierbij geef ik <span class="text-secondary" id="idPGO">NaamLeverancierPGO</span>
        , de aanbieder van mijn PGO, toestemming om de volgende gegevens te delen met
        <span class="text-secondary" id="idZA">NaamZorgaanbieder</span>:
      <ul class="info" id="myDelenList"></ul>
      <script>
        const urlParamsD = new URLSearchParams(window.location.search);
        var alldata = urlParamsD.get('gid');
        var data = alldata.split(',')
        list = document.getElementById("myDelenList");
        data.forEach((item) => {
          li = document.createElement("li");
          li.innerHTML = `<span class="text-secondary">${item}</span>`;
          list.appendChild(li);
        });
      </script>
      </p>
      <form action="https://acc-auth.dutchhealthcare.nl/commonauth" method="post" id="profile" name="">
        <input type="hidden" id="sessionDataKey" name="sessionDataKey" />
        <input type="hidden" name="consent" id="consent" value="denied" />
      </form>
      <div class="buttons">
         <button id="buttonYes2" class="permission-btn yes">Ja, ik bevestig</button>
         <button id="buttonNo2" class="deny-btn no">Nee, ik bevestig niet</button>
	  </div>
      <p class="info">
        Wanneer je een keuze hebt gemaakt of deze pagina sluit, dan word je uitgelogd bij <span class="text-secondary" id="idZA">NaamZorgaanbieder</span>.
      </p>
      <section class="trigger">
        <input type="checkbox" name="showstatementD" id="showstatementD" />
        <label for="showstatementD"> Toon toelichting</label>
        <div class="statement">
          <p>
            In een persoonlijke gezondheidsomgeving (PGO) kun je verbinding maken met de computer van jouw
            zorgaanbieder(s). Zoals van de huisarts of het ziekenhuis.
          </p>
          <p>
            Natuurlijk wil je dat dit veilig gebeurt. Hiervoor heeft Stichting MedMij strenge regels gemaakt. PGO’s en
            zorgaanbieders met een MedMij-label volgen deze regels. Het MedMij-label betekent dat jij deze PGO op een
            veilige manier kunt verbinden met deze zorgaanbieders. En het betekent ook dat jouw gegevens veilig worden
            opgeslagen in jouw PGO.
          </p>
          <p>
            <span class="text-secondary" id="idZA">NaamZorgaanbieder</span> wil zeker weten dat je je persoons- en/of
            medische gegevens met hem wil delen.
            Na jouw toestemming worden de gegevens vanuit je PGO naar <span class="text-secondary" id="idZA">NaamZorgaanbieder</span> gestuurd.
            Het is aan je zorgverlener om te beslissen of hij de informatie die je met hem deelt opneemt in je medisch
            dossier.
          </p>
        </div>
      </section>
    </div>
  </div>
  <script nonce="gw">
    document.getElementById("buttonYes").addEventListener("click", () => {
      document.getElementById("buttonYes").disabled = "true";
	  console.log("document.getElementById.addEventListener(click");
	  aubWachten();
      approved(); return false;
    });
	document.getElementById("buttonNo").addEventListener("click", () => {
      document.getElementById("buttonNo").disabled = "true";
	  aubWachten();
	  console.log("document.getElementById.addEventListener(click");
	   
      deny(); return false;
    });
	document.getElementById("buttonYes2").addEventListener("click", () => {
      document.getElementById("buttonYes2").disabled = "true";
	  console.log("document.getElementById.addEventListener(click");
	 aubWachten();
      approved(); return false;
    });
	document.getElementById("buttonNo2").addEventListener("click", () => {
      document.getElementById("buttonNo2").disabled = "true";
	  aubWachten();
	   
	  console.log("document.getElementById.addEventListener(click");
      deny(); return false;
    });
	function aubWachten()
	{
	  var btYes = document.getElementById("buttonYes");
	  var btNo = document.getElementById("buttonNo");
	  var btYes2 = document.getElementById("buttonYes2");
	  var btNo2 = document.getElementById("buttonNo2");
      var str = "AUB wachten u wordt redirect...";
      btYes.innerHTML = str;
	  btNo.innerHTML = str;
      btYes2.innerHTML = str;
	  btNo2.innerHTML = str;

	}
  </script>
</body>

</html>